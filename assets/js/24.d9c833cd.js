(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{574:function(t,s,a){t.exports=a.p+"assets/img/docker.2cfa3b6d.svg"},684:function(t,s,a){"use strict";a.r(s);var e=a(52),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("Docker 是一个工具，可以帮助开发人员构建、卸载与再现软件的运行时环境，它包含一个命令行程序、一个后台守护进程、以及一组远程资源服务。")]),t._v(" "),e("ul",[e("li",[t._v("通过 UNIX 的"),e("strong",[t._v("容器技术")]),t._v("，对容器的运行时环境进行良好的封装（Namespaces 技术），并对竞争资源进行管理和保护（Cgroups 技术）")]),t._v(" "),e("li",[t._v("通过"),e("strong",[t._v("镜像技术")]),t._v("，对容器的运行时状态进行打包、分发和再现")]),t._v(" "),e("li",[t._v("通过"),e("strong",[t._v("远程仓库")]),t._v("，对镜像进行有效的管理")])]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("容器技术与虚拟机技术")])]),t._v(" "),e("p",[t._v("虚拟机技术是通过 Hypervisor 对物理资源进行共享管理，然后在上层构建出多个不同的操作系统。然而缺点是很明显的，就是操作系统的构建是很笨重的，想象一下，在一个 Linux 宿主机中为了某种目的通过 Hypervisor 又从头到尾构建出一个类似的 Linux 从系统，是多么不明智的做法。")]),t._v(" "),e("p",[t._v("容器技术摒弃了 Hypervisor ，自身直接调用 Linux 宿主机上的内核，然后在上层构建出多个轻量级的类 Linux 的运行环境。缺点也是很明显的，不够灵活，只有 Linux 拥有这样的技术，Windows 暂时还没有，也不可能在 Linux 的宿主机上通过容器技术构建出一个 Windows 运行环境。")])]),t._v(" "),e("p",[t._v("docker 命令的格式")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("sub"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("p",[t._v("docker 命令预览")]),t._v(" "),e("p",[e("img",{attrs:{src:a(574),alt:""}})]),t._v(" "),e("h2",{attrs:{id:"docker-run"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-run"}},[t._v("#")]),t._v(" docker run")]),t._v(" "),e("p",[t._v("创建容器并启动")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker run "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("start-cmd"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --name <container-name>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --detach, -d")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --interactive, -i")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --tty, -t")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --rm")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --env, -e <env-key>=<env-value>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --port, -p <host-port>:<container-port>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --net <net-name>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --volume, -v <host-v>:<container-v>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --restart always")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --entrypoint <entry-cmd>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --memory, -m <memory-size>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --cpu-shares, -c <cpu-weight>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --link c1,c2 ")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-create"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-create"}},[t._v("#")]),t._v(" docker create")]),t._v(" "),e("p",[t._v("和 "),e("code",[t._v("docker run")]),t._v(" 相同，只不过该命令不会启动容器")]),t._v(" "),e("h2",{attrs:{id:"docker-start-restart-stop-rm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-start-restart-stop-rm"}},[t._v("#")]),t._v(" docker start/restart/stop/rm")]),t._v(" "),e("p",[t._v("启动/重启/终止/删除容器")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker start/restart/stop/rm "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("container"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("container"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-exec"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-exec"}},[t._v("#")]),t._v(" docker exec")]),t._v(" "),e("p",[t._v("在一个运行的容器中启动一个新命令")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("container"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("exec-cmd"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --detach, -d")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --interactive, -i")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --tty, -t")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-logs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-logs"}},[t._v("#")]),t._v(" docker logs")]),t._v(" "),e("p",[t._v("查看容器的日志")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker logs "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("container"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --follow, -f : 追踪logs输出，ctrl+c 终止追踪")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-ps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-ps"}},[t._v("#")]),t._v(" docker ps")]),t._v(" "),e("p",[t._v("列出容器的信息")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ps")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --all, -a")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-inspect"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-inspect"}},[t._v("#")]),t._v(" docker inspect")]),t._v(" "),e("p",[t._v("查看容器信息")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker inspect "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("container"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --format, -f <fmt-str>")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-search"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-search"}},[t._v("#")]),t._v(" docker search")]),t._v(" "),e("p",[t._v("在远程库搜索")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker search "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("search-str"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-pull-push"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-pull-push"}},[t._v("#")]),t._v(" docker pull/push")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker pull/push "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("container"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-commit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-commit"}},[t._v("#")]),t._v(" docker commit")]),t._v(" "),e("p",[t._v("从容器中构造新的镜像")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker commit "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("container"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --author, -a <author>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --message, -m <message>")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-tag"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-tag"}},[t._v("#")]),t._v(" docker tag")]),t._v(" "),e("p",[t._v("打标签")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker tag "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("source-image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("new-image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-save-load"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-save-load"}},[t._v("#")]),t._v(" docker save/load")]),t._v(" "),e("p",[t._v("导出/导入镜像")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker save -o "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n$ docker load -i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-export-import"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-export-import"}},[t._v("#")]),t._v(" docker export/import")]),t._v(" "),e("p",[t._v("导出容器的文件系统（会抛弃历史和相关元信息）/ 导入并打标签")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" -o "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("container"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-build"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-build"}},[t._v("#")]),t._v(" docker build")]),t._v(" "),e("p",[t._v("从 Dockerfile 构造新的镜像")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker build "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path-to-context"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --tag, -t <image>")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --file, -f <path-to-dockerfile>")]),t._v("\n")])])]),e("div",{staticClass:"language-dockerfile extra-class"},[e("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Dockerfile 模板")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" <image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" <command"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENTRYPOINT")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<entry-cmd>"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CMD")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<cmd>"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("COPY")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("chown=<user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("<group"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" <s1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v(" <d"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENV")]),t._v(" <env"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("key"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("=<env"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("value"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("VOLUME")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<v1>"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("EXPOSE")]),t._v(" <p1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WORKDIR")]),t._v(" <dir"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("USER")]),t._v(" <user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ONBUILD")]),t._v(" <dockerfile"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cmd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在以当前镜像为基础镜像构建时再执行")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-history"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-history"}},[t._v("#")]),t._v(" docker history")]),t._v(" "),e("p",[t._v("显示镜像层的信息")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("history")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-rmi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-rmi"}},[t._v("#")]),t._v(" docker rmi")]),t._v(" "),e("p",[t._v("删除镜像")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker rmi "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("image"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-network"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-network"}},[t._v("#")]),t._v(" docker network")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ docker network create "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("options"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("net-name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --driver bridge/host")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --subnet 172.18.0.0/16")]),t._v("\n$ docker network "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n$ docker network "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("net-name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n$ docker run "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". --network xxx "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n$ docker run "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". --network xxx --ip xxx.xxx.xxx.xxx "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需指定subnet")]),t._v("\n$ docker run "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". --network container:xxx "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 共享容器的网络空间")]),t._v("\n")])])]),e("h2",{attrs:{id:"docker-compose"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[t._v("#")]),t._v(" docker compose")]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker-compose.yml 骨架")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("<container-name>")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <image"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("xx\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("xx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("xx\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("xx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enviroment")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx=xx\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx=xx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("entrypoint")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xxx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xxx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("depends_on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dns")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("network_mode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" xx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("stdin_open")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("tty")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("xxx")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("networks")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("xxx")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bridge\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("subnet")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" xxx.xxx.xxx.xxx/xx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("external")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n")])])]),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("$ docker-compose -f "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path-to-file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" up -d\n$ docker-compose -f "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path-to-file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" down\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);