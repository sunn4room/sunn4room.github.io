<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL 学习笔记 | sunn4room</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.62005803.css" as="style"><link rel="preload" href="/assets/js/app.2d05b873.js" as="script"><link rel="preload" href="/assets/js/9.fd2d7f08.js" as="script"><link rel="preload" href="/assets/js/3.5fc63a44.js" as="script"><link rel="preload" href="/assets/js/12.0010c894.js" as="script"><link rel="prefetch" href="/assets/js/10.50ae4a69.js"><link rel="prefetch" href="/assets/js/11.afdccb1f.js"><link rel="prefetch" href="/assets/js/13.eb55877c.js"><link rel="prefetch" href="/assets/js/14.65cfc2ff.js"><link rel="prefetch" href="/assets/js/15.0b8b74f4.js"><link rel="prefetch" href="/assets/js/16.4dbb4aa4.js"><link rel="prefetch" href="/assets/js/17.271c05bb.js"><link rel="prefetch" href="/assets/js/18.4c3e94d0.js"><link rel="prefetch" href="/assets/js/19.1a0cddca.js"><link rel="prefetch" href="/assets/js/2.d45a9055.js"><link rel="prefetch" href="/assets/js/20.cdf7cb28.js"><link rel="prefetch" href="/assets/js/21.fbf2cd3f.js"><link rel="prefetch" href="/assets/js/22.42257d5f.js"><link rel="prefetch" href="/assets/js/23.e26a383f.js"><link rel="prefetch" href="/assets/js/24.d9c833cd.js"><link rel="prefetch" href="/assets/js/25.f8ca341b.js"><link rel="prefetch" href="/assets/js/26.a42edc25.js"><link rel="prefetch" href="/assets/js/27.0127ab0c.js"><link rel="prefetch" href="/assets/js/28.cd79c0d4.js"><link rel="prefetch" href="/assets/js/29.c3f37782.js"><link rel="prefetch" href="/assets/js/30.043d284c.js"><link rel="prefetch" href="/assets/js/31.423ed3ce.js"><link rel="prefetch" href="/assets/js/32.26519eb1.js"><link rel="prefetch" href="/assets/js/33.f57167ad.js"><link rel="prefetch" href="/assets/js/34.ecaa6ee5.js"><link rel="prefetch" href="/assets/js/35.47e91ee0.js"><link rel="prefetch" href="/assets/js/36.258a624f.js"><link rel="prefetch" href="/assets/js/37.68bb6fda.js"><link rel="prefetch" href="/assets/js/38.94239711.js"><link rel="prefetch" href="/assets/js/39.e83c38cf.js"><link rel="prefetch" href="/assets/js/4.caf2fcbd.js"><link rel="prefetch" href="/assets/js/40.acf21eb1.js"><link rel="prefetch" href="/assets/js/41.d164530a.js"><link rel="prefetch" href="/assets/js/5.886701df.js"><link rel="prefetch" href="/assets/js/6.61d8e906.js"><link rel="prefetch" href="/assets/js/7.177acf7a.js"><link rel="prefetch" href="/assets/js/8.84396220.js">
    <link rel="stylesheet" href="/assets/css/0.styles.62005803.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="app"><div id="header"><img id="hero" src="/assets/img/hero.470debc7.png"><span id="title">MySQL 学习笔记</span><div id="search-box" class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div><aside id="aside"><div class="__vuescroll" style="height:100%;width:100%;padding:0;position:relative;overflow:hidden;"><div class="__panel __hidebar" style="position:relative;box-sizing:border-box;height:100%;overflow-y:hidden;overflow-x:hidden;transform-origin:;transform:;"><div class="__view" style="position:relative;box-sizing:border-box;min-width:100%;min-height:100%;"><div class="margin-box"><div class="white-line"></div><div class="shell"><div class="sh-header"><div class="dot" style="background-color: #e9524a"></div><div class="dot" style="background-color: #f1ae1b"></div><div class="dot" style="background-color: #59c837"></div></div><div class="sh-body"><div class="line"><span>&gt; </span><span style="color:#4ebdcf">Who are you?</span></div><div class="line right"><span style="color:#97d209">I'm sunn4room</span><span> &lt;</span></div><div class="line right"><span style="color:#97d209">em... Just Sunny Room</span><span> &lt;</span></div><div class="line right"><span style="color:#97d209">And you?</span><span class="cursor">a</span><span> &lt;</span></div></div></div><div class="header-tag" style="font-size:1rem;font-weight:bold;margin-top:1.5rem;">MySQL 学习笔记</div><a href="#架构设计" class="header-tag" style="font-size:1rem;margin-left:1rem;">架构设计</a><a href="#配置文件" class="header-tag" style="font-size:1rem;margin-left:1rem;">配置文件</a><a href="#命令行" class="header-tag" style="font-size:1rem;margin-left:1rem;">命令行</a><a href="#sql-语句" class="header-tag" style="font-size:1rem;margin-left:1rem;">SQL 语句</a><a href="#insert-into" class="header-tag" style="font-size:1rem;margin-left:2rem;">INSERT INTO</a><a href="#delete-from" class="header-tag" style="font-size:1rem;margin-left:2rem;">DELETE FROM</a><a href="#update" class="header-tag" style="font-size:1rem;margin-left:2rem;">UPDATE</a><a href="#select" class="header-tag" style="font-size:1rem;margin-left:2rem;">SELECT</a><a href="#连接" class="header-tag" style="font-size:1rem;margin-left:3rem;">连接</a><a href="#小表驱动大表" class="header-tag" style="font-size:1rem;margin-left:3rem;">小表驱动大表</a><a href="#慢查询日志" class="header-tag" style="font-size:1rem;margin-left:3rem;">慢查询日志</a><a href="#index" class="header-tag" style="font-size:1rem;margin-left:2rem;">INDEX</a><a href="#索引类型" class="header-tag" style="font-size:1rem;margin-left:3rem;">索引类型</a><a href="#索引失效" class="header-tag" style="font-size:1rem;margin-left:3rem;">索引失效</a><a href="#系统配置语句" class="header-tag" style="font-size:1rem;margin-left:2rem;">系统配置语句</a><a href="#系统内置函数" class="header-tag" style="font-size:1rem;margin-left:2rem;">系统内置函数</a><a href="#查询优化" class="header-tag" style="font-size:1rem;margin-left:1rem;">查询优化</a><a href="#explain" class="header-tag" style="font-size:1rem;margin-left:2rem;">EXPLAIN</a><a href="#show-profiles" class="header-tag" style="font-size:1rem;margin-left:2rem;">SHOW PROFILES</a><a href="#锁-innodb" class="header-tag" style="font-size:1rem;margin-left:1rem;">锁（InnoDB）</a><a href="#共享锁和拍他锁" class="header-tag" style="font-size:1rem;margin-left:2rem;">共享锁和拍他锁</a><a href="#事务-innodb" class="header-tag" style="font-size:1rem;margin-left:1rem;">事务（InnoDB）</a><a href="#原子性的实现" class="header-tag" style="font-size:1rem;margin-left:2rem;">原子性的实现</a><a href="#隔离性的实现" class="header-tag" style="font-size:1rem;margin-left:2rem;">隔离性的实现</a><a href="#持久性的实现" class="header-tag" style="font-size:1rem;margin-left:2rem;">持久性的实现</a><a href="#日志" class="header-tag" style="font-size:1rem;margin-left:1rem;">日志</a><a href="#错误日志" class="header-tag" style="font-size:1rem;margin-left:2rem;">错误日志</a><a href="#普通查询日志" class="header-tag" style="font-size:1rem;margin-left:2rem;">普通查询日志</a><a href="#慢查询日志-2" class="header-tag" style="font-size:1rem;margin-left:2rem;">慢查询日志</a><a href="#二进制日志" class="header-tag" style="font-size:1rem;margin-left:2rem;">二进制日志</a><a href="#存储原理" class="header-tag" style="font-size:1rem;margin-left:1rem;">存储原理</a><a href="#innodb" class="header-tag" style="font-size:1rem;margin-left:2rem;">InnoDB</a><a href="#聚集索引" class="header-tag" style="font-size:1rem;margin-left:3rem;">聚集索引</a><a href="#辅助索引" class="header-tag" style="font-size:1rem;margin-left:3rem;">辅助索引</a><a href="#myisam" class="header-tag" style="font-size:1rem;margin-left:2rem;">MyISAM</a><a href="#非聚集索引" class="header-tag" style="font-size:1rem;margin-left:3rem;">非聚集索引</a><a href="#集群" class="header-tag endtag" style="font-size:1rem;margin-left:1rem;">集群</a></div></div></div></div></aside><div id="curtain"></div><main id="main"><div class="__vuescroll" style="height:100%;width:100%;padding:0;position:relative;overflow:hidden;"><div class="__panel __hidebar" style="position:relative;box-sizing:border-box;height:100%;overflow-y:hidden;overflow-x:hidden;transform-origin:;transform:;"><div class="__view" style="position:relative;box-sizing:border-box;min-width:100%;min-height:100%;"><div class="margin-box"><div class="white-line"></div><div class="box"><div class="post-tags"><span class="post-tag ca-tag"><span><a class="firstca endcd" style="color: white">数据库技术</a><!----></span></span><a class="ta-tag post-tag">mysql</a><a class="ta-tag post-tag">sql</a><span class="da-tag post-tag">2020.08.02</span><!----></div></div><div class="box"><h1 style="text-align:center;">MySQL 学习笔记</h1><div class="markdown-body content__default"><p>mysql</p> <h2 id="架构设计"><a href="#架构设计" class="header-anchor">#</a> 架构设计</h2> <p><img src="/assets/img/mysql.e22fccc5.svg" alt=""></p> <h2 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h2> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[mysqld]</span>
<span class="token constant">port</span> <span class="token attr-value"><span class="token punctuation">=</span> _port</span>

</code></pre></div><h2 id="命令行"><a href="#命令行" class="header-anchor">#</a> 命令行</h2> <div class="language-sh extra-class"><pre class="language-sh"><code>$ mysql -h _host -u _user -p
</code></pre></div><h2 id="sql-语句"><a href="#sql-语句" class="header-anchor">#</a> SQL 语句</h2> <h3 id="insert-into"><a href="#insert-into" class="header-anchor">#</a> INSERT INTO</h3> <h3 id="delete-from"><a href="#delete-from" class="header-anchor">#</a> DELETE FROM</h3> <h3 id="update"><a href="#update" class="header-anchor">#</a> UPDATE</h3> <h3 id="select"><a href="#select" class="header-anchor">#</a> SELECT</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">&lt;</span>select_list<span class="token operator">&gt;</span>
<span class="token keyword">FROM</span> <span class="token operator">&lt;</span>table1<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>join_type<span class="token operator">&gt;</span> <span class="token keyword">JOIN</span> <span class="token operator">&lt;</span>table2<span class="token operator">&gt;</span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span>join_condition<span class="token operator">&gt;</span>
<span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>where_condition<span class="token operator">&gt;</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>group_by_list<span class="token operator">&gt;</span>
<span class="token keyword">HAVING</span> <span class="token operator">&lt;</span>having_condition<span class="token operator">&gt;</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>order_by_list<span class="token operator">&gt;</span>
<span class="token keyword">LIMIT</span> <span class="token operator">&lt;</span>limit_num<span class="token operator">&gt;</span>

<span class="token comment">-------- 机读顺序 ---------</span>
<span class="token comment">-- FROM &lt;table1&gt;</span>
<span class="token comment">-- ON &lt;join_condition&gt;</span>
<span class="token comment">-- &lt;join_type&gt; JOIN &lt;table2&gt;</span>
<span class="token comment">-- WHERE &lt;where_condition&gt;</span>
<span class="token comment">-- GROUP BY &lt;group_by_list&gt;</span>
<span class="token comment">-- HAVING &lt;having_condition&gt;</span>
<span class="token comment">-- SELECT &lt;select_list&gt;</span>
<span class="token comment">-- ORDER BY &lt;order_by_list&gt;</span>
<span class="token comment">-- LIMIT &lt;limit_num&gt;</span>
</code></pre></div><h4 id="连接"><a href="#连接" class="header-anchor">#</a> 连接</h4> <p>MySQL 支持全连接、内连接、左连接、右连接</p> <table><thead><tr><th>type</th> <th>描述</th> <th>驱动</th></tr></thead> <tbody><tr><td>, xxx</td> <td>全连接</td> <td>左表驱动右表</td></tr> <tr><td>inner join xxx on xxx</td> <td>内连接</td> <td>小表驱动大表</td></tr> <tr><td>left join xxx on xxx</td> <td>左连接</td> <td>左表驱动右表</td></tr> <tr><td>right join xxx on xxx</td> <td>右连接</td> <td>右表驱动左表</td></tr></tbody></table> <h4 id="小表驱动大表"><a href="#小表驱动大表" class="header-anchor">#</a> 小表驱动大表</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- a &gt; b</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> a <span class="token keyword">WHERE</span> a<span class="token punctuation">.</span>id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> id <span class="token keyword">from</span> b<span class="token punctuation">)</span>
<span class="token comment">-- a &lt; b</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> a <span class="token keyword">WHERE</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token keyword">FROM</span> b <span class="token keyword">WHERE</span> b<span class="token punctuation">.</span>id<span class="token operator">=</span>a<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
</code></pre></div><h4 id="慢查询日志"><a href="#慢查询日志" class="header-anchor">#</a> 慢查询日志</h4> <h3 id="index"><a href="#index" class="header-anchor">#</a> INDEX</h3> <p>索引是为了提高查询效率而设计的一种特殊的数据结构。MySQL 主要用的是 B+Tree。</p> <ul><li>B+Tree 可以有效减少磁盘 IO</li> <li>B+Tree 可以提供高效的范围查询</li></ul> <h4 id="索引类型"><a href="#索引类型" class="header-anchor">#</a> 索引类型</h4> <h4 id="索引失效"><a href="#索引失效" class="header-anchor">#</a> 索引失效</h4> <ul><li>函数、计算、类型转换</li> <li>范围条件</li> <li>不等于 <code>&lt;&gt;</code> <code>!=</code></li> <li><code>is null</code> <code>is not null</code></li> <li><code>like '%abcd'</code></li> <li><code>or</code></li></ul> <h3 id="系统配置语句"><a href="#系统配置语句" class="header-anchor">#</a> 系统配置语句</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">GLOBAL</span> VARIABLES<span class="token punctuation">;</span> <span class="token comment">-- 查看所有变量</span>
<span class="token keyword">SELECT</span> @<span class="token variable">@_global</span><span class="token operator">-</span>variable<span class="token operator">-</span>name<span class="token punctuation">;</span> <span class="token comment">-- 查看单个变量</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> _global<span class="token operator">-</span>variable<span class="token operator">-</span>name<span class="token operator">=</span>XXX<span class="token punctuation">;</span> <span class="token comment">-- 设置变量值</span>
</code></pre></div><h3 id="系统内置函数"><a href="#系统内置函数" class="header-anchor">#</a> 系统内置函数</h3> <h2 id="查询优化"><a href="#查询优化" class="header-anchor">#</a> 查询优化</h2> <h3 id="explain"><a href="#explain" class="header-anchor">#</a> EXPLAIN</h3> <p>用于分析 SELECT 语句的执行情况</p> <table><thead><tr><th>字段名</th> <th>描述</th></tr></thead> <tbody><tr><td>id</td> <td>表示执行顺序，相同时自上而下，不相同时大者优先。起始为 1</td></tr> <tr><td>select_type</td> <td>表示查询类型。<br><strong>SIMPLE</strong> 简单查询（不包含子查询和 union）<br><strong>PRIMARY</strong> 主查询<br><strong>SUBQUERY</strong> 子查询<br><strong>DERIVED</strong> 临时表查询<br><strong>UNION</strong> 联合查询<br><strong>UNION RESULT</strong> 联合结果查询</td></tr> <tr><td>table</td> <td>查询所针对的表，如果是临时表，则会被命名为 derived&lt;id&gt;</td></tr> <tr><td>type</td> <td>表示表访问类型。<br><strong>system</strong> 全表只有一行，多出现在 mysql 的系统表里<br><strong>const</strong> 查询用到主键或唯一索引，且条件是一个常量<br><strong>eq_ref</strong> 查询用到主键或唯一索引，但条件不是一个常量<br><strong>ref</strong> 查询用到非唯一性索引<br><strong>range</strong> 查询用到了索引，但条件是范围查询<br><strong>index</strong> 全索引扫描<br><strong>ALL</strong> 全表扫描</td></tr> <tr><td>possible_key</td> <td>可能用到的索引</td></tr> <tr><td>key</td> <td>实际用到的索引</td></tr> <tr><td>key_len</td> <td>索引扫描的可能字节数</td></tr> <tr><td>ref</td> <td>查询条件的引用类型。const 常量</td></tr> <tr><td>rows</td> <td>可能扫描的行数</td></tr> <tr><td>Extra</td> <td>额外信息。<br><strong>using filesort</strong> 文件内排序，表示没有用到索引中的排序结果<br><strong>using temporary</strong> 使用了临时内存表<br><strong>using index</strong> 使用了覆盖索引<br><strong>using where</strong> 使用了索引进行查找</td></tr></tbody></table> <h3 id="show-profiles"><a href="#show-profiles" class="header-anchor">#</a> SHOW PROFILES</h3> <p>分析语句执行的资源损耗情况</p> <h2 id="锁-innodb"><a href="#锁-innodb" class="header-anchor">#</a> 锁（InnoDB）</h2> <h3 id="共享锁和拍他锁"><a href="#共享锁和拍他锁" class="header-anchor">#</a> 共享锁和拍他锁</h3> <p>InnoDB 实现了行级的共享锁和排他锁，读与读共享，读与写、写与写排他。</p> <h2 id="事务-innodb"><a href="#事务-innodb" class="header-anchor">#</a> 事务（InnoDB）</h2> <blockquote><p>事务的四大特性 (ACID)</p> <ul><li>atomicity，即原子性，事务中的所有操作要么全部执行，要么全部不执行，不予许在中间停滞</li> <li>consistency，即一致性，事务前后要保证数据的完整无误</li> <li>isolation，即隔离性，事务的执行不能被其他并行的事务干扰</li> <li>durability，即持久性，事务一旦提交，对数据的改变是永久的，否则事务将毫无意义</li></ul></blockquote> <h3 id="原子性的实现"><a href="#原子性的实现" class="header-anchor">#</a> 原子性的实现</h3> <p>原子性包含了持久性，为了避免歧义，一般原子性指的是异常回滚。MySQL 为每一行记录维护了一个 Undo log 的版本链，当执行异常时，可以通过 Undo log 回滚到初始状态。</p> <blockquote><p>Undo log 的底层原理是 MySQL 为每一张表都自动生成了两列数据，一列是事务 ID，一列是 Undo 指针，所以版本链中的每一个节点其实都是表中存着的记录，只不过有些记录你看不到而已，随着时间的推移，会把无用的版本链节点删除。</p></blockquote> <h3 id="隔离性的实现"><a href="#隔离性的实现" class="header-anchor">#</a> 隔离性的实现</h3> <p>Undo log 维护的事务 ID 以及系统自身维护的激活事务列表可以用来实现隔离算法。InnoDB 提供了对隔离性的完美支持，一共有四种隔离级别：</p> <ul><li><strong>未提交读</strong>：不隔离，直接读取版本链的第一条记录</li> <li><strong>提交读</strong>：事务内每次 SELECT 前会先得到激活事务 ID 列表和最大事务 ID，后面简称“快照”，然后从版本链的第一条记录开始，直到找到一个事务 ID 小于等于最大事务 ID 且不在激活事务 ID 列表里的记录。</li> <li><strong>可重复读</strong>：事务内第一次 SELECT 会生成“快照”，随后的 SELECT 会沿用第一次生成的“快照”找记录。</li> <li><strong>串行化</strong>：最严格的隔离级别，事务内每个 SELECT 都会给目标记录上锁，从而阻塞其他事务对同一目标记录的操作。</li></ul> <blockquote><p><strong>隔离性与锁</strong></p></blockquote> <h3 id="持久性的实现"><a href="#持久性的实现" class="header-anchor">#</a> 持久性的实现</h3> <p>事务提交前，会先记录 Redo log 之后再进行真正的数据修改，这样当数据修改发生故障，还可以通过 Redo log 在下一次启动时修复故障带来的影响。</p> <blockquote><p><strong>原子性、隔离性和持久性都是为了实现一致性</strong></p></blockquote> <h2 id="日志"><a href="#日志" class="header-anchor">#</a> 日志</h2> <h3 id="错误日志"><a href="#错误日志" class="header-anchor">#</a> 错误日志</h3> <ul><li>log_error：错误日志的存放路径</li> <li>log_warnings：表示是否记录告警信息到错误日志，0表示不记录告警信息，1表示记录告警信息，大于1表示各类告警信息</li></ul> <h3 id="普通查询日志"><a href="#普通查询日志" class="header-anchor">#</a> 普通查询日志</h3> <ul><li><p>general_log：表示查询日志是否开启</p></li> <li><p>log_output：以哪种方式存放。<code>FILE</code>表示存放于文件中，<code>TABLE</code>表示存放于表mysql.general_log中</p> <blockquote><p>同样适用于慢查询，<code>TABLE</code>表示存放于表 mysql.slow_log</p></blockquote></li> <li><p>general_log_file：表示查询日志存放于文件的路径</p></li></ul> <h3 id="慢查询日志-2"><a href="#慢查询日志-2" class="header-anchor">#</a> 慢查询日志</h3> <ul><li>slow_query_log：表示查询日志是否开启</li> <li>slow_query_log_file：表示查询日志存放于文件的路径</li> <li>long_query_time：表示多长时间的查询被认为&quot;慢查询&quot;，默认10s</li></ul> <h3 id="二进制日志"><a href="#二进制日志" class="header-anchor">#</a> 二进制日志</h3> <ul><li>log_bin：表示二进制日志是否开启</li> <li>log_bin_basename：二进制日志文件前缀名，其中包含路径</li> <li>max_binlog_size：二进制日志文件的最大大小，超过此大小，二进制文件会自动滚动</li> <li>log_bin_index：二进制日志文件索引文件名</li> <li>binlog_format：决定了二进制日志的记录方式
<ul><li><code>STATEMENT</code>以语句的形式记录，日志量少但不能保证完全恢复数据</li> <li><code>ROW</code>以数据修改的形式记录，日志量大但可以保证数据完全恢复</li></ul></li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>$ mysqlbinlog _log_bin_basename.000001
$ mysqlbinlog --start-position<span class="token operator">=</span>XXX --stop-position<span class="token operator">=</span>XXX _log_bin_basename.000001 <span class="token operator">&gt;</span> recover_file.sql
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#临时关闭binlog</span>
<span class="token keyword">set</span> sql_log_bin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">#执行sql文件</span>
source recover_file<span class="token punctuation">.</span><span class="token keyword">sql</span>
<span class="token comment">#开启binlog</span>
<span class="token keyword">set</span> sql_log_bin<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="存储原理"><a href="#存储原理" class="header-anchor">#</a> 存储原理</h2> <h3 id="innodb"><a href="#innodb" class="header-anchor">#</a> InnoDB</h3> <h4 id="聚集索引"><a href="#聚集索引" class="header-anchor">#</a> 聚集索引</h4> <p><img src="/assets/img/InnoDB-major.eb327e01.svg" alt=""></p> <h4 id="辅助索引"><a href="#辅助索引" class="header-anchor">#</a> 辅助索引</h4> <p><img src="/assets/img/InnoDB-minor.57218b25.svg" alt=""></p> <h3 id="myisam"><a href="#myisam" class="header-anchor">#</a> MyISAM</h3> <h4 id="非聚集索引"><a href="#非聚集索引" class="header-anchor">#</a> 非聚集索引</h4> <p><img src="/assets/img/MyISAM.8365cffd.svg" alt=""></p> <h2 id="集群"><a href="#集群" class="header-anchor">#</a> 集群</h2></div></div><div class="box"><div class="post-tags"><span class="post-tag ca-tag"><span><a class="firstca endcd" style="color: white">数据库技术</a><!----></span></span><a class="ta-tag post-tag">mysql</a><a class="ta-tag post-tag">sql</a><span class="da-tag post-tag">2020.08.02</span><!----></div></div><div class="box"><div id="vcomments"></div></div></div></div></div></div></main><div id="top-btn" class="btn" style="display:none;"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-up" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-arrow-up fa-w-14 fa-lg"><path fill="currentColor" d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></svg></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2d05b873.js" defer></script><script src="/assets/js/9.fd2d7f08.js" defer></script><script src="/assets/js/3.5fc63a44.js" defer></script><script src="/assets/js/12.0010c894.js" defer></script>
  </body>
</html>
