<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Golang 学习笔记 | sunn4room</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.62005803.css" as="style"><link rel="preload" href="/assets/js/app.2d05b873.js" as="script"><link rel="preload" href="/assets/js/9.fd2d7f08.js" as="script"><link rel="preload" href="/assets/js/3.5fc63a44.js" as="script"><link rel="preload" href="/assets/js/32.26519eb1.js" as="script"><link rel="prefetch" href="/assets/js/10.50ae4a69.js"><link rel="prefetch" href="/assets/js/11.afdccb1f.js"><link rel="prefetch" href="/assets/js/12.0010c894.js"><link rel="prefetch" href="/assets/js/13.eb55877c.js"><link rel="prefetch" href="/assets/js/14.65cfc2ff.js"><link rel="prefetch" href="/assets/js/15.0b8b74f4.js"><link rel="prefetch" href="/assets/js/16.4dbb4aa4.js"><link rel="prefetch" href="/assets/js/17.271c05bb.js"><link rel="prefetch" href="/assets/js/18.4c3e94d0.js"><link rel="prefetch" href="/assets/js/19.1a0cddca.js"><link rel="prefetch" href="/assets/js/2.d45a9055.js"><link rel="prefetch" href="/assets/js/20.cdf7cb28.js"><link rel="prefetch" href="/assets/js/21.fbf2cd3f.js"><link rel="prefetch" href="/assets/js/22.42257d5f.js"><link rel="prefetch" href="/assets/js/23.e26a383f.js"><link rel="prefetch" href="/assets/js/24.d9c833cd.js"><link rel="prefetch" href="/assets/js/25.f8ca341b.js"><link rel="prefetch" href="/assets/js/26.a42edc25.js"><link rel="prefetch" href="/assets/js/27.0127ab0c.js"><link rel="prefetch" href="/assets/js/28.cd79c0d4.js"><link rel="prefetch" href="/assets/js/29.c3f37782.js"><link rel="prefetch" href="/assets/js/30.043d284c.js"><link rel="prefetch" href="/assets/js/31.423ed3ce.js"><link rel="prefetch" href="/assets/js/33.f57167ad.js"><link rel="prefetch" href="/assets/js/34.ecaa6ee5.js"><link rel="prefetch" href="/assets/js/35.47e91ee0.js"><link rel="prefetch" href="/assets/js/36.258a624f.js"><link rel="prefetch" href="/assets/js/37.68bb6fda.js"><link rel="prefetch" href="/assets/js/38.94239711.js"><link rel="prefetch" href="/assets/js/39.e83c38cf.js"><link rel="prefetch" href="/assets/js/4.caf2fcbd.js"><link rel="prefetch" href="/assets/js/40.acf21eb1.js"><link rel="prefetch" href="/assets/js/41.d164530a.js"><link rel="prefetch" href="/assets/js/5.886701df.js"><link rel="prefetch" href="/assets/js/6.61d8e906.js"><link rel="prefetch" href="/assets/js/7.177acf7a.js"><link rel="prefetch" href="/assets/js/8.84396220.js">
    <link rel="stylesheet" href="/assets/css/0.styles.62005803.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="app"><div id="header"><img id="hero" src="/assets/img/hero.470debc7.png"><span id="title">Golang 学习笔记</span><div id="search-box" class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div><aside id="aside"><div class="__vuescroll" style="height:100%;width:100%;padding:0;position:relative;overflow:hidden;"><div class="__panel __hidebar" style="position:relative;box-sizing:border-box;height:100%;overflow-y:hidden;overflow-x:hidden;transform-origin:;transform:;"><div class="__view" style="position:relative;box-sizing:border-box;min-width:100%;min-height:100%;"><div class="margin-box"><div class="white-line"></div><div class="shell"><div class="sh-header"><div class="dot" style="background-color: #e9524a"></div><div class="dot" style="background-color: #f1ae1b"></div><div class="dot" style="background-color: #59c837"></div></div><div class="sh-body"><div class="line"><span>&gt; </span><span style="color:#4ebdcf">Who are you?</span></div><div class="line right"><span style="color:#97d209">I'm sunn4room</span><span> &lt;</span></div><div class="line right"><span style="color:#97d209">em... Just Sunny Room</span><span> &lt;</span></div><div class="line right"><span style="color:#97d209">And you?</span><span class="cursor">a</span><span> &lt;</span></div></div></div><div class="header-tag" style="font-size:1rem;font-weight:bold;margin-top:1.5rem;">Golang 学习笔记</div><a href="#注释" class="header-tag" style="font-size:1rem;margin-left:1rem;">注释</a><a href="#格式化" class="header-tag" style="font-size:1rem;margin-left:1rem;">格式化</a><a href="#声明" class="header-tag" style="font-size:1rem;margin-left:1rem;">声明</a><a href="#包声明" class="header-tag" style="font-size:1rem;margin-left:2rem;">包声明</a><a href="#引入声明" class="header-tag" style="font-size:1rem;margin-left:2rem;">引入声明</a><a href="#常量声明-const" class="header-tag" style="font-size:1rem;margin-left:2rem;">常量声明 const</a><a href="#变量声明-var" class="header-tag" style="font-size:1rem;margin-left:2rem;">变量声明 var</a><a href="#函数声明-func" class="header-tag" style="font-size:1rem;margin-left:2rem;">函数声明 func</a><a href="#派生类型声明-type" class="header-tag" style="font-size:1rem;margin-left:2rem;">派生类型声明 type</a><a href="#标识符" class="header-tag" style="font-size:1rem;margin-left:1rem;">标识符</a><a href="#关键字" class="header-tag" style="font-size:1rem;margin-left:2rem;">关键字</a><a href="#自定义标识符" class="header-tag" style="font-size:1rem;margin-left:2rem;">自定义标识符</a><a href="#其他标识符" class="header-tag" style="font-size:1rem;margin-left:2rem;">其他标识符</a><a href="#类型系统" class="header-tag" style="font-size:1rem;margin-left:1rem;">类型系统</a><a href="#内置类型" class="header-tag" style="font-size:1rem;margin-left:2rem;">内置类型</a><a href="#聚合类型" class="header-tag" style="font-size:1rem;margin-left:2rem;">聚合类型</a><a href="#指针类型" class="header-tag" style="font-size:1rem;margin-left:2rem;">指针类型</a><a href="#类型包装" class="header-tag" style="font-size:1rem;margin-left:2rem;">类型包装</a><a href="#类型转换" class="header-tag" style="font-size:1rem;margin-left:2rem;">类型转换</a><a href="#类型断言" class="header-tag" style="font-size:1rem;margin-left:2rem;">类型断言</a><a href="#运算符" class="header-tag" style="font-size:1rem;margin-left:1rem;">运算符</a><a href="#算术运算符" class="header-tag" style="font-size:1rem;margin-left:2rem;">算术运算符</a><a href="#关系运算符" class="header-tag" style="font-size:1rem;margin-left:2rem;">关系运算符</a><a href="#逻辑运算符" class="header-tag" style="font-size:1rem;margin-left:2rem;">逻辑运算符</a><a href="#位运算符" class="header-tag" style="font-size:1rem;margin-left:2rem;">位运算符</a><a href="#赋值运算符" class="header-tag" style="font-size:1rem;margin-left:2rem;">赋值运算符</a><a href="#指针运算符" class="header-tag" style="font-size:1rem;margin-left:2rem;">指针运算符</a><a href="#流控制" class="header-tag" style="font-size:1rem;margin-left:1rem;">流控制</a><a href="#main-和-init" class="header-tag" style="font-size:1rem;margin-left:2rem;">main() 和 init()</a><a href="#for" class="header-tag" style="font-size:1rem;margin-left:2rem;">for</a><a href="#if" class="header-tag" style="font-size:1rem;margin-left:2rem;">if</a><a href="#switch" class="header-tag" style="font-size:1rem;margin-left:2rem;">switch</a><a href="#select" class="header-tag" style="font-size:1rem;margin-left:2rem;">select</a><a href="#goto" class="header-tag" style="font-size:1rem;margin-left:2rem;">goto</a><a href="#defer" class="header-tag" style="font-size:1rem;margin-left:2rem;">defer</a><a href="#panic-和-recover" class="header-tag" style="font-size:1rem;margin-left:2rem;">panic 和 recover</a><a href="#协程" class="header-tag" style="font-size:1rem;margin-left:1rem;">协程</a><a href="#错误处理" class="header-tag" style="font-size:1rem;margin-left:1rem;">错误处理</a><a href="#命令行工具" class="header-tag" style="font-size:1rem;margin-left:1rem;">命令行工具</a><a href="#标准库" class="header-tag" style="font-size:1rem;margin-left:1rem;">标准库</a><a href="#fmt" class="header-tag" style="font-size:1rem;margin-left:2rem;">fmt</a><a href="#os" class="header-tag" style="font-size:1rem;margin-left:2rem;">os</a><a href="#path" class="header-tag" style="font-size:1rem;margin-left:2rem;">path</a><a href="#runtime" class="header-tag" style="font-size:1rem;margin-left:2rem;">runtime</a><a href="#io" class="header-tag" style="font-size:1rem;margin-left:2rem;">io</a><a href="#ioutil" class="header-tag" style="font-size:1rem;margin-left:2rem;">ioutil</a><a href="#bufio" class="header-tag" style="font-size:1rem;margin-left:2rem;">bufio</a><a href="#bytes" class="header-tag" style="font-size:1rem;margin-left:2rem;">bytes</a><a href="#strings" class="header-tag" style="font-size:1rem;margin-left:2rem;">strings</a><a href="#strconv" class="header-tag" style="font-size:1rem;margin-left:2rem;">strconv</a><a href="#json" class="header-tag" style="font-size:1rem;margin-left:2rem;">json</a><a href="#template" class="header-tag" style="font-size:1rem;margin-left:2rem;">template</a><a href="#net" class="header-tag" style="font-size:1rem;margin-left:2rem;">net</a><a href="#time" class="header-tag" style="font-size:1rem;margin-left:2rem;">time</a><a href="#regexp" class="header-tag" style="font-size:1rem;margin-left:2rem;">regexp</a><a href="#reflect" class="header-tag" style="font-size:1rem;margin-left:2rem;">reflect</a><a href="#sync" class="header-tag" style="font-size:1rem;margin-left:2rem;">sync</a><a href="#atomic" class="header-tag" style="font-size:1rem;margin-left:3rem;">atomic</a><a href="#math" class="header-tag" style="font-size:1rem;margin-left:2rem;">math</a><a href="#errors" class="header-tag" style="font-size:1rem;margin-left:2rem;">errors</a><a href="#context" class="header-tag" style="font-size:1rem;margin-left:2rem;">context</a><a href="#logger" class="header-tag" style="font-size:1rem;margin-left:2rem;">logger</a><a href="#testing" class="header-tag" style="font-size:1rem;margin-left:2rem;">testing</a><a href="#testmain" class="header-tag" style="font-size:1rem;margin-left:3rem;">TestMain</a><a href="#testxxx" class="header-tag" style="font-size:1rem;margin-left:3rem;">TestXxx</a><a href="#benchmarkxxx" class="header-tag endtag" style="font-size:1rem;margin-left:3rem;">BenchmarkXxx</a></div></div></div></div></aside><div id="curtain"></div><main id="main"><div class="__vuescroll" style="height:100%;width:100%;padding:0;position:relative;overflow:hidden;"><div class="__panel __hidebar" style="position:relative;box-sizing:border-box;height:100%;overflow-y:hidden;overflow-x:hidden;transform-origin:;transform:;"><div class="__view" style="position:relative;box-sizing:border-box;min-width:100%;min-height:100%;"><div class="margin-box"><div class="white-line"></div><div class="box"><div class="post-tags"><span class="post-tag ca-tag"><span><a class="firstca" style="color: white">程序设计</a><span><svg aria-hidden="true" focusable="false" data-prefix="fa" data-icon="caret-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512" class="svg-inline--fa fa-caret-right fa-w-6" style="width:1rem;"><path fill="currentColor" d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></svg></span></span><span><a class="endcd" style="color: white">Golang</a><!----></span></span><a class="ta-tag post-tag">学习笔记</a><a class="ta-tag post-tag">golang</a><span class="da-tag post-tag">2020.07.15</span><span class="uda-tag post-tag">2020.07.16</span></div></div><div class="box"><h1 style="text-align:center;">Golang 学习笔记</h1><div class="markdown-body content__default"><p>Golang 设计原则是在保证程序性能的前提下满足快速开发的需求。</p> <ul><li>静态类型语言</li> <li>编译型语言</li> <li>并发</li> <li>内存管理</li> <li>开源、包管理</li></ul> <h2 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h2> <ul><li><code>//</code> 单行注释</li> <li><code>/* ... */</code> 多行注释</li></ul> <h2 id="格式化"><a href="#格式化" class="header-anchor">#</a> 格式化</h2> <p>像 Java C 等语言为了自由的追求，对源码的格式并没有做强制限制。但 go 语言则不同，内置了格式化工具，不符合规则的源码是不会顺利通过编译的。</p> <ul><li>程序元素前被建议添加适当的注释，没有则会被警告</li> <li>不建议使用分号结尾，分号会在编译前根据行末符号自动添加或不添加
<ul><li><code>{</code> 后不会添加分号，所以 <code>func</code> 和 <code>{</code> 要同行，否则报错</li> <li><code>+</code> 后不会添加分号，可以起到换行的目的，其他运算符同理</li></ul></li> <li>格式化默认会使用缩进符，可以酌情替换成空格</li></ul> <h2 id="声明"><a href="#声明" class="header-anchor">#</a> 声明</h2> <h3 id="包声明"><a href="#包声明" class="header-anchor">#</a> 包声明</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> _pkg<span class="token operator">-</span>name
</code></pre></div><ul><li>Go 使用文件夹的形式组织源代码，每一个源码文件必须以包定义开头</li> <li>同一个文件夹下的源码文件必须具有相同的包名</li> <li>main 包代表一个可执行的包，除了 main 包，建议包名与文件夹名称保持一致</li> <li>一个包对应的文件夹下可以包含一个子包的文件夹</li> <li>包名是外部访问的标识符</li></ul> <h3 id="引入声明"><a href="#引入声明" class="header-anchor">#</a> 引入声明</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">import</span> <span class="token string">&quot;_pkg-path&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;_pkg-path&quot;</span>
    _alias <span class="token string">&quot;_pkg-path&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div><ul><li>import 语句出现在 package 后，程序实体前，用于引入外部包</li> <li>子包的写法是在父包路径后加 <code>/子包名</code></li></ul> <blockquote><p>不同的包管理工具会根据包路径采用不同的方式去寻找外部包</p></blockquote> <h3 id="常量声明-const"><a href="#常量声明-const" class="header-anchor">#</a> 常量声明 const</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">const</span> _name _type <span class="token operator">=</span> _expr
</code></pre></div><blockquote><p>iota 是一个特殊的常量，只能被编译器修改，const 内部随着行不断递增</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">const</span> <span class="token punctuation">(</span>
	a <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">// 0</span>
    b <span class="token comment">// 1</span>
    c <span class="token comment">// 2</span>
    d <span class="token comment">// 3</span>
<span class="token punctuation">)</span>
</code></pre></div></blockquote> <h3 id="变量声明-var"><a href="#变量声明-var" class="header-anchor">#</a> 变量声明 var</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> _name _type <span class="token comment">//</span>
<span class="token keyword">var</span> _name <span class="token operator">=</span> _expr <span class="token comment">// 变量的类型由后面的表达式决定</span>
</code></pre></div><blockquote><p>当未提供表达式时，默认赋初始值</p> <ul><li>整型和浮点型变量的默认值为 0 和 0.0。</li> <li>字符串变量的默认值为空字符串。</li> <li>布尔型变量默认为 false。</li> <li>切片、函数、指针变量等的默认为 nil。</li></ul></blockquote> <blockquote><p>在函数体内部，可以不使用 <code>var</code> 而使用 <code>:=</code> 来表示声明且赋值，如：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">xxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _name <span class="token operator">:=</span> _expr <span class="token comment">// 变量的类型由后面的表达式决定</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <blockquote><p>多变量声明，用 <code>,</code> 间隔，如：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> _name _type<span class="token punctuation">,</span> _name _type
<span class="token keyword">var</span> _name<span class="token punctuation">,</span> _name _type <span class="token comment">// 省略第一个类型</span>

<span class="token keyword">func</span> <span class="token function">xxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       _name<span class="token punctuation">,</span> _name <span class="token operator">:=</span> _expr<span class="token punctuation">,</span> _expr
<span class="token punctuation">}</span>
</code></pre></div><p>const 同理</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">const</span> _name _type<span class="token punctuation">,</span> _name _type
<span class="token keyword">const</span> _name<span class="token punctuation">,</span> _name _type <span class="token comment">// 省略第一个类型</span>
</code></pre></div></blockquote> <h3 id="函数声明-func"><a href="#函数声明-func" class="header-anchor">#</a> 函数声明 func</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">_fname</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">_fname</span><span class="token punctuation">(</span>_t _type<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">_fname</span><span class="token punctuation">(</span>_t _type<span class="token punctuation">)</span> <span class="token punctuation">(</span>_type<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>_t _type<span class="token punctuation">)</span> <span class="token function">_fname</span><span class="token punctuation">(</span>_t _type<span class="token punctuation">)</span> <span class="token punctuation">(</span>_type<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token comment">// 所有的执行者和形参在运行时都是值传递，所以必要时要考虑用指针类型</span>
</code></pre></div><h3 id="派生类型声明-type"><a href="#派生类型声明-type" class="header-anchor">#</a> 派生类型声明 type</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> _tname <span class="token keyword">struct</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">type</span> _tname <span class="token keyword">interface</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">type</span> _tname <span class="token keyword">func</span><span class="token punctuation">(</span>_type<span class="token punctuation">)</span> <span class="token punctuation">(</span>_type<span class="token punctuation">)</span>
<span class="token keyword">type</span> _tname <span class="token builtin">int</span><span class="token operator">/</span><span class="token builtin">string</span><span class="token operator">/</span>float<span class="token operator">/</span><span class="token builtin">bool</span>
</code></pre></div><h2 id="标识符"><a href="#标识符" class="header-anchor">#</a> 标识符</h2> <h3 id="关键字"><a href="#关键字" class="header-anchor">#</a> 关键字</h3> <p>break、default、func、interface、select、case、defer、go、map、struct、chan、else、goto、package、switch、const、fallthrough、if、range、type、continue、for、import、return、var</p> <h3 id="自定义标识符"><a href="#自定义标识符" class="header-anchor">#</a> 自定义标识符</h3> <ul><li><p>不能和关键字同名</p></li> <li><p>以字符或者下划线开头，由字符、数字和下划线组成</p></li> <li><p>推荐 “驼峰式” 风格</p></li></ul> <h3 id="其他标识符"><a href="#其他标识符" class="header-anchor">#</a> 其他标识符</h3> <ul><li>内置常量：true、false、iota、nil</li> <li>内置类型：int、int8、int16、int32、int64、uint、uint8、uint16、uint32、uint64、uintptr、float32、float64、complex128、complex64、bool、byte、rune、string、error</li> <li>内置函数：make、len、cap、new、append、copy、close、delete、complex、real、imag、panic、recover</li> <li>空位符：_</li></ul> <h2 id="类型系统"><a href="#类型系统" class="header-anchor">#</a> 类型系统</h2> <h3 id="内置类型"><a href="#内置类型" class="header-anchor">#</a> 内置类型</h3> <ul><li><p>int</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span>b101
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0303</span>
<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0xa0a</span>
</code></pre></div></li> <li><p>uint</p></li> <li><p>float</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token number">1.1</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token number">1.1e5</span>
</code></pre></div></li> <li><p>complex</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">complex</span><span class="token punctuation">(</span>_real<span class="token punctuation">,</span> _imag<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>bool</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre></div></li> <li><p>byte</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// byte 是 uint8 的包装类型</span>
</code></pre></div></li> <li><p>rune</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// rune 是 int32 的包装类型</span>
</code></pre></div></li> <li><p>string</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span>
</code></pre></div></li></ul> <h3 id="聚合类型"><a href="#聚合类型" class="header-anchor">#</a> 聚合类型</h3> <ul><li><p>数组</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token punctuation">[</span>_length<span class="token punctuation">]</span>_type
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>_type<span class="token punctuation">{</span>_expr<span class="token punctuation">,</span> _expr <span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre></div></li> <li><p>struct</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> A <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    a <span class="token builtin">int</span> <span class="token string">`_tag`</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a A <span class="token operator">=</span> A<span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span>
</code></pre></div><blockquote><p><strong>匿名结构体</strong>，即结构体嵌套一个匿名的结构体，可以将其属性和方法继承过来，直接使用</p></blockquote> <blockquote><p>空结构体 <code>struct{}</code></p></blockquote></li></ul> <blockquote><p><strong>聚合类型的值传递</strong>：数组会遍历元素并赋值到一个新的数组，结构体也会遍历属性并赋值到一个新的结构体</p></blockquote> <h3 id="指针类型"><a href="#指针类型" class="header-anchor">#</a> 指针类型</h3> <p>以上类型在声明的时候就已经分配的内存空间，直接存的就是值，而指针类型在声明的时候只分配一个指针空间，存的是指针</p> <ul><li><p>普通指针类型</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> a <span class="token operator">*</span>_type <span class="token operator">=</span> <span class="token operator">&amp;</span>expr
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>_type<span class="token punctuation">)</span> <span class="token comment">// new 分配内存，赋初值，返回指针</span>
</code></pre></div><blockquote><p>指针变量可以通过 <code>.</code> 直接访问源类型的方法；结构体的指针变量还可以直接访问源类型的属性，也正是因为这个缘故，下面的写法会报错：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> A <span class="token keyword">struct</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>a A<span class="token punctuation">)</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>A<span class="token punctuation">)</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span> <span class="token comment">// 与上一个方法重名了</span>
</code></pre></div></blockquote></li> <li><p>slice</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> s <span class="token punctuation">[</span><span class="token punctuation">]</span>_type
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>_type<span class="token punctuation">{</span>_expr<span class="token punctuation">,</span> _expr <span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">var</span> ss <span class="token operator">=</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token comment">// 重新制定范围</span>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> _len<span class="token punctuation">,</span> _cap<span class="token punctuation">)</span>
<span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> _expr<span class="token punctuation">,</span> _expr<span class="token punctuation">)</span>
<span class="token function">copy</span><span class="token punctuation">(</span>ss<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>map</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span>_ktype<span class="token punctuation">]</span>_vtype
<span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span>_ktype<span class="token punctuation">]</span>_vtype<span class="token punctuation">{</span>_expr<span class="token punctuation">:</span>_expr<span class="token punctuation">,</span> _expr<span class="token punctuation">:</span>_expr <span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span>_ktype<span class="token punctuation">]</span>_vtype<span class="token punctuation">,</span> _size<span class="token punctuation">)</span>
m<span class="token punctuation">[</span>_expr<span class="token punctuation">]</span> <span class="token operator">=</span> _expr
<span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> _kexpr<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>func</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> f <span class="token keyword">func</span><span class="token punctuation">(</span>_type<span class="token punctuation">,</span> _type<span class="token punctuation">)</span> <span class="token punctuation">(</span>_type<span class="token punctuation">,</span> _type<span class="token punctuation">)</span>
</code></pre></div><blockquote><p><strong>闭包</strong>，即函数返回函数，其意义在于：函数内部定义的局部变量无状态，而将有状态变量定义在外部又造成了外部命名空间的污染，闭包可以解决这个问题，如：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> i <span class="token builtin">int</span>
    <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        i<span class="token operator">++</span>
        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote></li> <li><p>interface</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> I <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">_fname</span><span class="token punctuation">(</span>_type<span class="token punctuation">,</span> _type<span class="token punctuation">)</span> <span class="token punctuation">(</span>_type<span class="token punctuation">,</span> _type<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> A <span class="token keyword">struct</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>a A<span class="token punctuation">)</span> <span class="token function">_fname</span><span class="token punctuation">(</span> p1 _type<span class="token punctuation">,</span> p2 _type<span class="token punctuation">)</span> <span class="token punctuation">(</span>_type<span class="token punctuation">,</span> _type<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 类型要完全一致，和Java不同</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> i I <span class="token operator">=</span> A<span class="token punctuation">{</span><span class="token punctuation">}</span>
i<span class="token punctuation">.</span><span class="token function">_fname</span><span class="token punctuation">(</span>xxx<span class="token punctuation">,</span> xxx<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>空接口 <code>interface{}</code></p></blockquote></li> <li><p>chan</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> c <span class="token keyword">chan</span><span class="token operator">/</span><span class="token operator">&lt;-</span><span class="token keyword">chan</span><span class="token operator">/</span><span class="token keyword">chan</span><span class="token operator">&lt;-</span> _type
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> _type<span class="token punctuation">,</span>_buf<span class="token punctuation">)</span>
<span class="token comment">// 无缓冲的通道会阻塞至接受者和发送者配对成功</span>
<span class="token function">close</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span>
</code></pre></div></li></ul> <blockquote><p><strong>指针类型的值传递</strong>：就是简单的赋值存储的地址</p></blockquote> <h3 id="类型包装"><a href="#类型包装" class="header-anchor">#</a> 类型包装</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> _new<span class="token operator">-</span><span class="token keyword">type</span><span class="token operator">-</span>name _old<span class="token operator">-</span><span class="token keyword">type</span>
</code></pre></div><h3 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">_type</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span>
</code></pre></div><h3 id="类型断言"><a href="#类型断言" class="header-anchor">#</a> 类型断言</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 目标必须是接口类型，通常 interface{} 可以接受所有类型的值，并转为接口类型</span>

<span class="token keyword">if</span> v<span class="token punctuation">,</span>ok <span class="token operator">:=</span> _target<span class="token punctuation">.</span><span class="token punctuation">(</span>_type<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
    <span class="token comment">// 断言成功</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 断言失败</span>
<span class="token punctuation">}</span>

<span class="token keyword">switch</span> v <span class="token operator">:=</span> _target<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">case</span> _type<span class="token punctuation">:</span>
    <span class="token operator">...</span>
<span class="token keyword">case</span> _type<span class="token punctuation">:</span>
    <span class="token operator">...</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>断言规则</p> <ul><li>如果要断言的类型是接口类型，会判断目标的实际类型是否满足断言类型，如果满足会返回一个断言类型的值，而不是直接返回实际类型的值</li> <li>否则，会判断目标的实际类型是否就是断言类型，如果是则会直接返回实际类型的值</li></ul></blockquote> <h2 id="运算符"><a href="#运算符" class="header-anchor">#</a> 运算符</h2> <h3 id="算术运算符"><a href="#算术运算符" class="header-anchor">#</a> 算术运算符</h3> <p>+、-、*、/、&amp;、++、--</p> <h3 id="关系运算符"><a href="#关系运算符" class="header-anchor">#</a> 关系运算符</h3> <p>==、!=、&lt;、&gt;、&lt;=、&gt;=</p> <h3 id="逻辑运算符"><a href="#逻辑运算符" class="header-anchor">#</a> 逻辑运算符</h3> <p>&amp;&amp;、||、!</p> <h3 id="位运算符"><a href="#位运算符" class="header-anchor">#</a> 位运算符</h3> <p>&amp;、|、^、&lt;&lt;、&gt;&gt;</p> <h3 id="赋值运算符"><a href="#赋值运算符" class="header-anchor">#</a> 赋值运算符</h3> <p>=、+=、-=、*=、/=、%=、&lt;&lt;=、&gt;&gt;=、&amp;=、^=、|=</p> <h3 id="指针运算符"><a href="#指针运算符" class="header-anchor">#</a> 指针运算符</h3> <p>&amp;、*</p> <h2 id="流控制"><a href="#流控制" class="header-anchor">#</a> 流控制</h2> <h3 id="main-和-init"><a href="#main-和-init" class="header-anchor">#</a> main() 和 init()</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token operator">...</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>main 包下的 main 方法是程序启动的入口。如果存在 init 方法，则会在 main 方法执行之前被执行。</p> <p>init 的执行顺序：</p> <ul><li>如果文件内定义了多个 init 则从上到下执行</li> <li>如果同一个包下，不同文件内有多个 init ，则按照字典序执行多个文件内的 init</li> <li>如果导入的包里也有 init 方法，则按顺序先执行导入包中的 init 方法</li></ul> <h3 id="for"><a href="#for" class="header-anchor">#</a> for</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">for</span> _init<span class="token punctuation">;</span>_condition<span class="token punctuation">;</span>_post <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> _condition <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> item <span class="token operator">:=</span> <span class="token keyword">range</span> _string<span class="token operator">/</span>_array<span class="token operator">/</span>_slice <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> _map <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">for</span> element <span class="token operator">:=</span> <span class="token keyword">range</span> _chan <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span> <span class="token comment">// 直到 _chan 关闭</span>
</code></pre></div><h3 id="if"><a href="#if" class="header-anchor">#</a> if</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">if</span> <span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token operator">&lt;</span>condition<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="switch"><a href="#switch" class="header-anchor">#</a> switch</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">switch</span> <span class="token operator">&lt;</span>init<span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token operator">&lt;</span>varible<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;</span>value1<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    	<span class="token operator">...</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;</span>value2<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    	<span class="token operator">...</span>
    	<span class="token comment">// fallthrough 表示继续执行下面的判断</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
    	<span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">switch</span> <span class="token operator">&lt;</span>init<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;</span>condition<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    	<span class="token operator">...</span>
    <span class="token keyword">case</span> <span class="token operator">&lt;</span>condition<span class="token operator">&gt;</span><span class="token punctuation">:</span>
    	<span class="token operator">...</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
    	<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="select"><a href="#select" class="header-anchor">#</a> select</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">select</span> <span class="token punctuation">{</span> <span class="token comment">// 阻塞到某个分支可以继续执行为止。当多个分支都准备好时会随机选择一个执行 </span>
    <span class="token keyword">case</span> _element<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span> _chan<span class="token punctuation">:</span> <span class="token comment">// _chan 有数据或被关闭</span>
    	<span class="token operator">...</span>
    <span class="token keyword">case</span> _chan <span class="token operator">&lt;-</span> _expr<span class="token punctuation">:</span> <span class="token comment">// _chan 可接受数据</span>
    	<span class="token operator">...</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token comment">// 上面的操作条件都不满足</span>
    	<span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="goto"><a href="#goto" class="header-anchor">#</a> goto</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">goto</span> label
<span class="token operator">...</span>
label<span class="token punctuation">:</span> xxx
</code></pre></div><p>goto 语句可以无条件地转移到过程中指定的行</p> <h3 id="defer"><a href="#defer" class="header-anchor">#</a> defer</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">xxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> <span class="token function">_f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> <span class="token function">_f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">defer</span> <span class="token function">_f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span> <span class="token comment">// 函数结束后的执行顺序是 f3 f2 f1 func</span>
</code></pre></div><p>defer 的执行时机</p> <ul><li>包裹defer的函数返回时</li> <li>包裹defer的函数执行到末尾时</li> <li>所在的goroutine发生 panic 时</li></ul> <h3 id="panic-和-recover"><a href="#panic-和-recover" class="header-anchor">#</a> panic 和 recover</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">xxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function">panic</span><span class="token punctuation">(</span>_error<span class="token punctuation">)</span>
    <span class="token operator">...</span>
    <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> e <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当 panic 发生时，将暂停当前进程的所有活动，然后运行 defer 栈中的方法，如果遇到了 recover 将恢复当前进程的活动，继续执行相应 defer 的外围程序，否则将终止程序并将错误信息打印出来。</p> <h2 id="协程"><a href="#协程" class="header-anchor">#</a> 协程</h2> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> <span class="token function">_fname</span><span class="token punctuation">(</span>_param<span class="token punctuation">)</span>
<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>_param<span class="token operator">-</span>list<span class="token punctuation">)</span> <span class="token punctuation">(</span>_ret<span class="token operator">-</span>list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span>_param<span class="token punctuation">)</span>
</code></pre></div><blockquote><p><strong>GMP模型</strong></p> <ul><li>G：代表一个协程</li> <li>M：代表一个线程</li> <li>P：代表 G 的一个队列，负责调度，即当 P 中存在 G 时就会绑定一个 M 用来执行 G 的任务</li></ul> <p><strong>调度机制</strong></p> <ul><li>当一个 P 队列里没有 G 了，会先到全局 P 中抢一个 G 过来执行，当全局 P 中也没有 G ，那么会到其他 P 的末尾抢一个 G 过来执行（全局 P 的意义在于减少了 P 与 P 之间的相互竞争）</li> <li>P 会自动捕捉运行中的 G 的状态，当发现阻塞时间过程时，会重新绑定另一个 M，执行后续的 G ，而当阻塞完成或者认为其已经死掉时回收旧的 M</li></ul> <p>由此可知，go 实现了用户态下的协程调度（轻量级），减少了系统级别的线程调度（重量级）带来的性能损耗，提高了系统的并发能力。</p></blockquote> <h2 id="错误处理"><a href="#错误处理" class="header-anchor">#</a> 错误处理</h2> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 内置 error 类型</span>
<span class="token keyword">type</span> <span class="token builtin">error</span> <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> MyError <span class="token keyword">struct</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>me <span class="token operator">*</span>MyError<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>r _type<span class="token punctuation">,</span> e <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>
    <span class="token keyword">return</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>MyError<span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
    <span class="token operator">...</span>
    <span class="token keyword">return</span> xxx<span class="token punctuation">,</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">if</span> r<span class="token punctuation">,</span> e <span class="token operator">:=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> ee<span class="token punctuation">,</span> ok <span class="token operator">:=</span> e<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>MyError<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
            <span class="token operator">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="命令行工具"><a href="#命令行工具" class="header-anchor">#</a> 命令行工具</h2> <div class="language-sh extra-class"><pre class="language-sh"><code>$ go run _main_package_path _arg1 _arg2 <span class="token punctuation">..</span>.
$ go <span class="token function">fmt</span>
$ go get
$ go build
<span class="token comment"># CGO_ENABLED=0 GOOS=linux GOARCH=amd64</span>
</code></pre></div><h2 id="标准库"><a href="#标准库" class="header-anchor">#</a> 标准库</h2> <h3 id="fmt"><a href="#fmt" class="header-anchor">#</a> fmt</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">Print</span><span class="token punctuation">(</span>a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">Println</span><span class="token punctuation">(</span>a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">Printf</span><span class="token punctuation">(</span>format <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>

<span class="token function">Scan</span><span class="token punctuation">(</span>a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">Scanln</span><span class="token punctuation">(</span>a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">Scanf</span><span class="token punctuation">(</span>format <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>

<span class="token comment">// 相应的都有 Fxx Sxx 的版本，分别代表Writer/Reader、字符串</span>

<span class="token comment">// %%  百分号</span>
<span class="token comment">// %v  值</span>
<span class="token comment">// %T  值的类型</span>
<span class="token comment">// %t  true false</span>
<span class="token comment">// %b  二进制</span>
<span class="token comment">// %o  八进制</span>
<span class="token comment">// %d  十进制</span>
<span class="token comment">// %x  十六进制</span>
<span class="token comment">// %c  字符</span>
<span class="token comment">// %f  浮点计数法</span>
<span class="token comment">// %e  科学计数法</span>
<span class="token comment">// %s  字符串</span>
<span class="token comment">// %p  指针</span>
</code></pre></div><h3 id="os"><a href="#os" class="header-anchor">#</a> os</h3> <div class="language-go extra-class"><pre class="language-go"><code>os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 命令名</span>
os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token comment">// 命令参数</span>

</code></pre></div><h3 id="path"><a href="#path" class="header-anchor">#</a> path</h3> <h3 id="runtime"><a href="#runtime" class="header-anchor">#</a> runtime</h3> <h3 id="io"><a href="#io" class="header-anchor">#</a> io</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Reader <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Read</span><span class="token punctuation">(</span>p <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> Writer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Write</span><span class="token punctuation">(</span>p <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> ReaderFrom <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">ReadFrom</span><span class="token punctuation">(</span>r Reader<span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int64</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> WriterTo <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">WriteTo</span><span class="token punctuation">(</span>w Writer<span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int64</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ioutil"><a href="#ioutil" class="header-anchor">#</a> ioutil</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">ReadFile</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">WriteFile</span><span class="token punctuation">(</span>filename <span class="token builtin">string</span><span class="token punctuation">,</span> data <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> perm os<span class="token punctuation">.</span>FileMode<span class="token punctuation">)</span> <span class="token builtin">error</span>
</code></pre></div><h3 id="bufio"><a href="#bufio" class="header-anchor">#</a> bufio</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">NewReader</span><span class="token punctuation">(</span>rd io<span class="token punctuation">.</span>Reader<span class="token punctuation">)</span> <span class="token operator">*</span>Reader
<span class="token function">NewReaderSize</span><span class="token punctuation">(</span>rd io<span class="token punctuation">.</span>Reader<span class="token punctuation">,</span> size <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>Reader
	<span class="token function">ReadString</span><span class="token punctuation">(</span>delim <span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">NewWriter</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">)</span> <span class="token operator">*</span>Writer
<span class="token function">NewWriterSize</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> size <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">*</span>Writer
	<span class="token function">WriteString</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="bytes"><a href="#bytes" class="header-anchor">#</a> bytes</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">Compare</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token function">Contains</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> subslice <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token function">Equal</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token function">HasPrefix</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> prefix <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token function">HasSuffix</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> suffix <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token function">Index</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> sep <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token function">LastIndex</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> sep <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token function">Repeat</span><span class="token punctuation">(</span>b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> count <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
<span class="token function">Replace</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> old<span class="token punctuation">,</span> <span class="token builtin">new</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
<span class="token function">ToLower</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
<span class="token function">ToUpper</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
<span class="token function">Trim</span><span class="token punctuation">(</span>s <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> cutset <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
<span class="token function">NewBuffer</span><span class="token punctuation">(</span>buf <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token operator">*</span>Buffer
	<span class="token function">ReadString</span><span class="token punctuation">(</span>delim <span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>line <span class="token builtin">string</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
	<span class="token function">WriteString</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
	<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">NewReader</span><span class="token punctuation">(</span>b <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token operator">*</span>Reader
</code></pre></div><h3 id="strings"><a href="#strings" class="header-anchor">#</a> strings</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">Compare</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token function">Contains</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> substr <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token function">EqualFold</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> t <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token function">HasPrefix</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> prefix <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token function">HasSuffix</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> suffix <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token function">Index</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> substr <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token function">Join</span><span class="token punctuation">(</span>elems <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> sep <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">LastIndex</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> substr <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
<span class="token function">Repeat</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">,</span> count <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">Replace</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> old<span class="token punctuation">,</span> <span class="token builtin">new</span> <span class="token builtin">string</span><span class="token punctuation">,</span> n <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">ReplaceAll</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> old<span class="token punctuation">,</span> <span class="token builtin">new</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">Split</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> sep <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>
<span class="token function">ToLower</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">ToUpper</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">Trim</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">,</span> cutset <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">new</span><span class="token punctuation">(</span>strings<span class="token punctuation">.</span>Builder<span class="token punctuation">)</span> <span class="token operator">*</span>strings<span class="token punctuation">.</span>Builder
	<span class="token function">WriteString</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
	<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
</code></pre></div><h3 id="strconv"><a href="#strconv" class="header-anchor">#</a> strconv</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">Atoi</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">ParseBool</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">ParseFloat</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">,</span> bitSize <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">float64</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">ParseInt</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">,</span> base <span class="token builtin">int</span><span class="token punctuation">,</span> bitSize <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>i <span class="token builtin">int64</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">ParseUint</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">,</span> base <span class="token builtin">int</span><span class="token punctuation">,</span> bitSize <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">uint64</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token function">Itoa</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">FormatBool</span><span class="token punctuation">(</span>b <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">FormatFloat</span><span class="token punctuation">(</span>f <span class="token builtin">float64</span><span class="token punctuation">,</span> fmt <span class="token builtin">byte</span><span class="token punctuation">,</span> prec<span class="token punctuation">,</span> bitSize <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">FormatInt</span><span class="token punctuation">(</span>i <span class="token builtin">int64</span><span class="token punctuation">,</span> base <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token function">FormatUint</span><span class="token punctuation">(</span>i <span class="token builtin">uint64</span><span class="token punctuation">,</span> base <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
</code></pre></div><h3 id="json"><a href="#json" class="header-anchor">#</a> json</h3> <h3 id="template"><a href="#template" class="header-anchor">#</a> template</h3> <h3 id="net"><a href="#net" class="header-anchor">#</a> net</h3> <h3 id="time"><a href="#time" class="header-anchor">#</a> time</h3> <div class="language-go extra-class"><pre class="language-go"><code>Nanosecond
Microsecond
Millisecond
Second
Minute
Hour

<span class="token function">Sleep</span><span class="token punctuation">(</span>d Duration<span class="token punctuation">)</span>
<span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Time
</code></pre></div><h3 id="regexp"><a href="#regexp" class="header-anchor">#</a> regexp</h3> <h3 id="reflect"><a href="#reflect" class="header-anchor">#</a> reflect</h3> <p>当向接口变量赋予一个实体类型的时候，接口会存储实体的类型信息，反射就是通过接口的类型信息实现的，反射建立在类型的基础上。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// 主要 API</span>
<span class="token function">TypeOf</span><span class="token punctuation">(</span>i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> Type
    <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token comment">// 类型名称</span>
    <span class="token function">PkgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token comment">// 类型包路径</span>
    <span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Kind <span class="token comment">// 类型分类 （Int/Struct/Prt...）</span>
    <span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token comment">// 结构体类型的属性个数</span>
    <span class="token function">Field</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> StructField <span class="token comment">// 指定索引的属性</span>
    <span class="token function">FieldByName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>StructField<span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token comment">// 指定名称的属性</span>
    <span class="token function">FieldByIndex</span><span class="token punctuation">(</span>index <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> StructField <span class="token comment">// 针对结构体嵌套</span>
		Name <span class="token builtin">string</span> <span class="token comment">// 属性名称</span>
		Type Type <span class="token comment">// 属性类型</span>
	<span class="token function">NumMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token comment">// 方法个数</span>
	<span class="token function">Method</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> Method <span class="token comment">// 指定索引的方法</span>
	<span class="token function">MethodByName</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>Method<span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token comment">// 指定名称的方法</span>
		Name <span class="token builtin">string</span> <span class="token comment">// 方法名称</span>
		Type Type <span class="token comment">// 方法类型</span>
	<span class="token function">NumIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token comment">// 函数类型的形参个数</span>
	<span class="token function">In</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> Type <span class="token comment">// 指定索引的形参类型</span>
	<span class="token function">NumOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token comment">// 函数类型的形参个数</span>
	<span class="token function">Out</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> Type <span class="token comment">// 指定索引的形参类型</span>
	<span class="token function">ChanDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ChanDir <span class="token comment">// 通道类型的方向性</span>
	<span class="token function">Key</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Type <span class="token comment">// Map 的key类型</span>
	<span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Type <span class="token comment">// Array, Chan, Map, Ptr, or Slice 的元素类型</span>
	<span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token comment">// Array的个数</span>
<span class="token function">ValueOf</span><span class="token punctuation">(</span>i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> Value
	<span class="token function">Type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Type
	<span class="token function">Interface</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 以空接口的形式返回值</span>
	<span class="token function">Set</span><span class="token punctuation">(</span>x Value<span class="token punctuation">)</span>
	<span class="token function">Call</span><span class="token punctuation">(</span>in <span class="token punctuation">[</span><span class="token punctuation">]</span>Value<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>Value <span class="token comment">// 执行函数值</span>
	<span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 关闭通道值对应的通道</span>
	<span class="token function">Convert</span><span class="token punctuation">(</span>t Type<span class="token punctuation">)</span> Value
	<span class="token function">Field</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> Value
	<span class="token function">FieldByIndex</span><span class="token punctuation">(</span>index <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> Value
	<span class="token function">FieldByName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> Value
	<span class="token function">Method</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> Value
	<span class="token function">MethodByName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> Value
	<span class="token function">Index</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> Value
	<span class="token function">MapIndex</span><span class="token punctuation">(</span>key Value<span class="token punctuation">)</span> Value
	<span class="token function">Recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>x Value<span class="token punctuation">,</span> ok <span class="token builtin">bool</span><span class="token punctuation">)</span>
	<span class="token function">Send</span><span class="token punctuation">(</span>x Value<span class="token punctuation">)</span>
</code></pre></div><h3 id="sync"><a href="#sync" class="header-anchor">#</a> sync</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> mutex sync<span class="token punctuation">.</span>Mutex
mutex<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
mutex<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> _rwmutex sync<span class="token punctuation">.</span>RWMutex
rwmutex<span class="token punctuation">.</span><span class="token function">Rlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
rwmutex<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
rwmutex<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
rwmutex<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup
wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> _Struct <span class="token keyword">struct</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> structPool <span class="token operator">=</span> sync<span class="token punctuation">.</span>Pool <span class="token punctuation">{</span>
    New<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&amp;</span>_Struct<span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
sp <span class="token operator">:=</span> structPool<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>_Struct<span class="token punctuation">)</span>
<span class="token operator">...</span>
structPool<span class="token punctuation">.</span><span class="token function">Put</span><span class="token punctuation">(</span>sp<span class="token punctuation">)</span>
<span class="token operator">...</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> once sync<span class="token punctuation">.</span>Once
onceBody <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Only once&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        once<span class="token punctuation">.</span><span class="token function">Do</span><span class="token punctuation">(</span>onceBody<span class="token punctuation">)</span> <span class="token comment">// 只会执行一次，且 Do返回后可以确保第一次执行完毕</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="atomic"><a href="#atomic" class="header-anchor">#</a> atomic</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">AddInt32</span><span class="token punctuation">(</span>addr <span class="token operator">*</span><span class="token builtin">int32</span><span class="token punctuation">,</span> delta <span class="token builtin">int32</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">new</span> <span class="token builtin">int32</span><span class="token punctuation">)</span>
<span class="token function">CompareAndSwapInt32</span><span class="token punctuation">(</span>addr <span class="token operator">*</span><span class="token builtin">int32</span><span class="token punctuation">,</span> old<span class="token punctuation">,</span> <span class="token builtin">new</span> <span class="token builtin">int32</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>swapped <span class="token builtin">bool</span><span class="token punctuation">)</span>
<span class="token function">LoadInt32</span><span class="token punctuation">(</span>addr <span class="token operator">*</span><span class="token builtin">int32</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>val <span class="token builtin">int32</span><span class="token punctuation">)</span>
<span class="token function">StoreInt32</span><span class="token punctuation">(</span>addr <span class="token operator">*</span><span class="token builtin">int32</span><span class="token punctuation">,</span> val <span class="token builtin">int32</span><span class="token punctuation">)</span>
<span class="token function">SwapInt32</span><span class="token punctuation">(</span>addr <span class="token operator">*</span><span class="token builtin">int32</span><span class="token punctuation">,</span> <span class="token builtin">new</span> <span class="token builtin">int32</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>old <span class="token builtin">int32</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>不推荐使用这个包，尽量使用 sync 包中的 API 。</p></blockquote> <h3 id="math"><a href="#math" class="header-anchor">#</a> math</h3> <h3 id="errors"><a href="#errors" class="header-anchor">#</a> errors</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token function">New</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span>
<span class="token comment">// fmt.Errorf(&quot;%w xxx&quot;, _error) 包装 _error</span>
<span class="token function">Unwrap</span><span class="token punctuation">(</span><span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token comment">// 解包</span>
<span class="token function">Is</span><span class="token punctuation">(</span><span class="token builtin">error</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token comment">// 判断前者里是否包装着后者</span>
</code></pre></div><h3 id="context"><a href="#context" class="header-anchor">#</a> context</h3> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> ctx<span class="token punctuation">,</span> cancel <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">WithCancel</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">{</span>
        <span class="token keyword">select</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token operator">&lt;-</span> ctx<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            	<span class="token keyword">return</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span>
            	<span class="token operator">...</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>
<span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 通知协程停止</span>
</code></pre></div><div class="language-go extra-class"><pre class="language-go"><code><span class="token function">Background</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Context
<span class="token function">WithCancel</span><span class="token punctuation">(</span>Context<span class="token punctuation">)</span> <span class="token punctuation">(</span>Context<span class="token punctuation">,</span> CancelFunc<span class="token punctuation">)</span>
<span class="token function">WithTimeout</span><span class="token punctuation">(</span>Context<span class="token punctuation">,</span> time<span class="token punctuation">.</span>Duration<span class="token punctuation">)</span> <span class="token punctuation">(</span>Context<span class="token punctuation">,</span> CancelFunc<span class="token punctuation">)</span>
<span class="token function">WithDeadline</span><span class="token punctuation">(</span>Context<span class="token punctuation">,</span> time<span class="token punctuation">.</span>Time<span class="token punctuation">)</span> <span class="token punctuation">(</span>Context<span class="token punctuation">,</span> CancelFunc<span class="token punctuation">)</span>
	<span class="token function">Deadline</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>deadline time<span class="token punctuation">.</span>Time<span class="token punctuation">,</span> ok <span class="token builtin">bool</span><span class="token punctuation">)</span>
	<span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="logger"><a href="#logger" class="header-anchor">#</a> logger</h3> <div class="language-go extra-class"><pre class="language-go"><code>log<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>xx<span class="token punctuation">,</span> xx<span class="token punctuation">)</span>
log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>xx<span class="token punctuation">,</span> xx<span class="token punctuation">)</span> <span class="token comment">// print(xx,xx)   os.Exit(1)</span>
log<span class="token punctuation">.</span><span class="token function">Panic</span><span class="token punctuation">(</span>xx<span class="token punctuation">,</span> xx<span class="token punctuation">)</span> <span class="token comment">// print(xx,xx)   panic()</span>

log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>format<span class="token punctuation">,</span> xx<span class="token punctuation">,</span> xx<span class="token punctuation">)</span>
log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>xx<span class="token punctuation">,</span> xx<span class="token punctuation">)</span>
<span class="token comment">// Fatal Panic 同 Print</span>

log<span class="token punctuation">.</span><span class="token function">Prefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
log<span class="token punctuation">.</span><span class="token function">Flags</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
log<span class="token punctuation">.</span><span class="token function">Writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

log<span class="token punctuation">.</span><span class="token function">SetPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;prefix&gt;&quot;</span><span class="token punctuation">)</span>
log<span class="token punctuation">.</span><span class="token function">SetFlags</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>flag<span class="token operator">&gt;</span><span class="token punctuation">)</span>
log<span class="token punctuation">.</span><span class="token function">SetOutput</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>io<span class="token punctuation">.</span>Writer<span class="token operator">&gt;</span><span class="token punctuation">)</span>

log<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>io<span class="token punctuation">.</span>Writer<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;prefix&gt;&quot;</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>flag<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token comment">// 自定义log</span>

<span class="token comment">// ------------flags-------------</span>
<span class="token comment">// Ldate: the date in the local time zone: 2009/01/23</span>
<span class="token comment">// Ltime: the time in the local time zone: 01:23:23</span>
<span class="token comment">// Lmicroseconds: microsecond resolution: 01:23:23.123123.  assumes Ltime.</span>
<span class="token comment">// Llongfile: full file name and line number: /a/b/c/d.go:23</span>
<span class="token comment">// Lshortfile: final file name element and line number: d.go:23. overrides Llongfile</span>
<span class="token comment">// LUTC: if Ldate or Ltime is set, use UTC rather than the local time zone</span>
<span class="token comment">// Lmsgprefix: move the &quot;prefix&quot; from the beginning of the line to before the message</span>
<span class="token comment">// LstdFlags: initial values for the standard logger</span>
</code></pre></div><h3 id="testing"><a href="#testing" class="header-anchor">#</a> testing</h3> <p><code>*_test.go</code> 文件用于 <code>go test</code> 测试</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ go <span class="token builtin class-name">test</span> -v
$ go <span class="token builtin class-name">test</span> -run <span class="token string">&quot;xx/xx&quot;</span>
$ go <span class="token builtin class-name">test</span> -bench <span class="token string">&quot;xx/xx&quot;</span>
</code></pre></div><h4 id="testmain"><a href="#testmain" class="header-anchor">#</a> TestMain</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestMain</span><span class="token punctuation">(</span>m <span class="token operator">*</span>testing<span class="token punctuation">.</span>M<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span> <span class="token comment">// before</span>
    ret <span class="token operator">:=</span> m<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 执行测试，包括单元测试、性能测试和示例测试</span>
    <span class="token operator">...</span> <span class="token comment">// after</span>
    os<span class="token punctuation">.</span><span class="token function">Exit</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="testxxx"><a href="#testxxx" class="header-anchor">#</a> TestXxx</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestXxx</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 日志</span>
    t<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 错误日志</span>
    t<span class="token punctuation">.</span><span class="token function">Fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 标记不通过</span>
    f<span class="token punctuation">.</span><span class="token function">FailNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 标记不通过，且立即停止执行</span>
    <span class="token operator">...</span>
    t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;_name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="benchmarkxxx"><a href="#benchmarkxxx" class="header-anchor">#</a> BenchmarkXxx</h4> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">BenchmarkXxx</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		<span class="token operator">...</span>
        b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 重置计时器</span>
    	b<span class="token punctuation">.</span><span class="token function">StopTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 停止计时器</span>
    	b<span class="token punctuation">.</span><span class="token function">StartTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 开始计时器</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div></div><div class="box"><div class="post-tags"><span class="post-tag ca-tag"><span><a class="firstca" style="color: white">程序设计</a><span><svg aria-hidden="true" focusable="false" data-prefix="fa" data-icon="caret-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512" class="svg-inline--fa fa-caret-right fa-w-6" style="width:1rem;"><path fill="currentColor" d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"></path></svg></span></span><span><a class="endcd" style="color: white">Golang</a><!----></span></span><a class="ta-tag post-tag">学习笔记</a><a class="ta-tag post-tag">golang</a><span class="da-tag post-tag">2020.07.15</span><span class="uda-tag post-tag">2020.07.16</span></div></div><div class="box"><div id="vcomments"></div></div></div></div></div></div></main><div id="top-btn" class="btn" style="display:none;"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-up" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-arrow-up fa-w-14 fa-lg"><path fill="currentColor" d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"></path></svg></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2d05b873.js" defer></script><script src="/assets/js/9.fd2d7f08.js" defer></script><script src="/assets/js/3.5fc63a44.js" defer></script><script src="/assets/js/32.26519eb1.js" defer></script>
  </body>
</html>
